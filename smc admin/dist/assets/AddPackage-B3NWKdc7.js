import{r as x,u as E,a as O,b as A,c as S,j as e,A as F,o as Q,F as L,y as B,d as H,e as c,l as C}from"./index-74p-botU.js";const M=H().shape({razorpay:c().trim().required("Razorpay ID is required"),packagename:c().trim().required("Package name is required"),duration:c().trim().required("Plan Duration is required"),inr:C().required("Price in INR required"),course:c().trim().required("Courses are required"),tax:C().required("Tax is required"),subtopic:c().oneOf(["5","10"],"Please select a valid number of subtopics").required("Please select the number of subtopics"),coursetype:c().oneOf(["Text & Image Course","Video & Text Course"],"Please select a valid course type").required("Please select the course type"),preGenerated:c().oneOf(["Yes","No"],"Please select Yes or No for Pre-Generated Courses").required("Pre-Generated Courses selection is required"),studyGroup:c().oneOf(["Yes","No"],"Please select Yes or No for Study Group").required("Study Group selection is required"),quizAccess:c().oneOf(["Yes","No"],"Please select Yes or No for Quiz Access").required("Quiz Access selection is required")}),m=({label:l,register:o,name:i,type:n="text",error:u,...s})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{className:"text-lg",children:[l," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{...o(i),type:n,className:"bg-white outline-none text-black rounded-md py-1.5 px-2",...s}),e.jsx("p",{className:"text-red-700",children:u})]}),G=({label:l,register:o,name:i,options:n,error:u})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{className:"text-lg",children:[l," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative ",children:[e.jsxs("select",{defaultValue:"",...o(i),className:"w-full bg-white outline-none text-black rounded-md py-2 px-2",children:[e.jsxs("option",{value:"",disabled:!0,children:["Select ",l]}),n.map((s,t)=>e.jsx("option",{value:s.value,children:s.label},t))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-5 bg-gray-100 px-4 rounded-lg pointer-events-none outline-none",children:e.jsx(L,{className:"text-black text-2xl"})})]}),e.jsx("p",{className:"text-red-700",children:u})]}),p=({label:l,register:o,name:i,options:n,error:u,watchValue:s})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("p",{className:"text-lg",children:[l," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"flex flex-col space-y-1",children:n.map(t=>{const d=`${i}-${t.value}`;return e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{...o(i),type:"radio",id:d,value:t.value,className:"hidden peer"}),e.jsxs("label",{htmlFor:d,className:"flex items-center cursor-pointer",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-gray-400 rounded-sm flex items-center justify-center peer-checked:border-blue-500 peer-checked:bg-blue-500",children:e.jsx("span",{className:`w-3 h-3 ${s===t.value?"bg-white":"hidden"}`})}),e.jsx("span",{className:"ml-2",children:t.label})]})]},t.value)})}),e.jsx("p",{className:"text-red-700",children:u})]}),K=()=>{var h,g,b,y,N,j,v,f,w,q,P;const[l,o]=x.useState(!1),[i,n]=x.useState([]),u=E(),{register:s,handleSubmit:t,watch:d,formState:{errors:a}}=O({resolver:Q(M)}),z=d("subtopic"),Y=d("coursetype"),I=d("preGenerated"),T=d("studyGroup"),V=d("quizAccess");x.useEffect(()=>{$()},[]);const $=async()=>{try{const r=await A.get(`${S}/api/gettax`);Array.isArray(r.data.tax)?n(r.data.tax):(console.error("Expected an array of tax options, but got:",r.data),n([]))}catch(r){console.error("Error fetching taxes:",r)}},R=async r=>{o(!0);const D={...r,packagename:r.packagename.toLowerCase()};try{(await A.post(`${S}/api/subscriptionplan`,D)).status===200&&(B.success("Package created Successfully"),u("/packages"))}catch(k){console.log(k)}finally{o(!1)}};return e.jsxs("div",{className:" mx-6 my-8 font-poppins h-full",children:[e.jsx("p",{className:"mb-2",children:"Add a New Package"}),e.jsxs("form",{onSubmit:t(R),className:"mx-4 my-6",children:[e.jsxs("div",{className:"mx-6 grid gap-12 font-extralight my-8",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 items-center",children:[e.jsx(m,{label:"Package Name",register:s,name:"packagename",placeholder:"Enter Package name",error:(h=a.packagename)==null?void 0:h.message}),e.jsx(G,{label:"Plan Renewal",register:s,name:"duration",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(g=a.duration)==null?void 0:g.message}),e.jsx(m,{label:"Package Price INR",register:s,name:"inr",placeholder:"Enter Price In INR",error:(b=a.inr)==null?void 0:b.message})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx(m,{label:"No of Courses",register:s,name:"course",type:"number",placeholder:"00",error:(y=a.course)==null?void 0:y.message}),e.jsx(G,{label:"Tax",register:s,name:"tax",options:i.map(r=>({value:r.percentage,label:`${r.percentage}%`})),error:(N=a.tax)==null?void 0:N.message}),e.jsx(m,{label:"Razorpay ID",register:s,name:"razorpay",placeholder:"Enter Razorpay ID",defaultValue:"N/A",error:(j=a.razorpay)==null?void 0:j.message})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center",children:[e.jsx(p,{label:"No of Subtopic",register:s,name:"subtopic",options:[{value:"5",label:"05"},{value:"10",label:"10"}],error:(v=a.subtopic)==null?void 0:v.message,watchValue:z}),e.jsx(p,{label:"Course Type",register:s,name:"coursetype",options:[{value:"Text & Image Course",label:"Theory & Image Course"},{value:"Video & Text Course",label:"Video & Theory Course"}],error:(f=a.coursetype)==null?void 0:f.message,watchValue:Y}),e.jsx(p,{label:"Pre-Generated Courses",register:s,name:"preGenerated",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],error:(w=a.preGenerated)==null?void 0:w.message,watchValue:I}),e.jsx(p,{label:"Study Group",register:s,name:"studyGroup",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],error:(q=a.studyGroup)==null?void 0:q.message,watchValue:T}),e.jsx(p,{label:"Quiz Access",register:s,name:"quizAccess",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],error:(P=a.quizAccess)==null?void 0:P.message,watchValue:V})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"submit",className:`my-6 cursor-pointer text-white bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-8 py-1.5 rounded-md ${l?"opacity-50 cursor-not-allowed":""}`,disabled:l,children:l?e.jsxs("div",{className:"flex text-xl gap-2",children:[e.jsx(F,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{children:"Saving...."})]}):"Save"}),e.jsx("p",{onClick:()=>u("/packages"),className:" cursor-pointer text-black bg-white  py-1.5 px-4 rounded-md ",children:"Cancel"})]})]})]})};export{K as default};

import{r as p,u as H,a as M,j as e,A as Q,o as $,F as U,b as Y,c as E,y as F,d as B,e as r}from"./index-74p-botU.js";const R=B().shape({fname:r().trim().required("First name is required").transform(a=>a.toLowerCase()),lname:r().required("Last name is required").transform(a=>a.toLowerCase()),email:r().email("Please Enter a valid Email").trim().required("Email is required"),phone:r().required("Please enter mob.no"),dob:r().required("Please enter Date of birth"),plan:r().oneOf(["monthly","quarterly","halfYearly","annual"],"Please select a valid plan").required("Please select a plan"),city:r().oneOf(["monthly","quarterly","halfYearly","annual"],"Please select a valid city").required("Please select a city"),state:r().oneOf(["monthly","quarterly","halfYearly","annual"],"Please select a valid state").required("Please select a state"),country:r().oneOf(["monthly","quarterly","halfYearly","annual"],"Please select a valid country").required("Please select a country"),zipcode:r().oneOf(["monthly","quarterly","halfYearly","annual"],"Please select a valid zip code").required("Please select a zip code"),addressline1:r().required("Address Line 1 is required"),addressline2:r().required("Address Line 2 is required")}),t=({label:a,register:i,name:n,type:u="text",error:o,...d})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{className:"text-lg",children:[a," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{...i(n),type:u,className:"bg-white outline-none text-black rounded-md py-2 px-2",...d}),e.jsx("p",{className:"text-red-700",children:o})]}),c=({label:a,register:i,name:n,options:u,error:o})=>e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{className:"text-lg",children:[a," ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative ",children:[e.jsxs("select",{defaultValue:"",...i(n),className:"w-full bg-white outline-none text-black rounded-md py-2 px-2",children:[e.jsxs("option",{value:"",disabled:!0,children:["Select ",a]}),u.map((d,x)=>e.jsx("option",{value:d.value,children:d.label},x))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-5 bg-gray-100 px-4 rounded-lg pointer-events-none outline-none",children:e.jsx(U,{className:"text-black text-2xl"})})]}),e.jsx("p",{className:"text-red-700",children:o})]}),J=()=>{var y,g,b,v,f,j,N,q,S,P,A,w;const[a,i]=p.useState(!1),[n,u]=p.useState(null),[o,d]=p.useState(""),[x,V]=p.useState(null),h=H(),{register:l,handleSubmit:C,formState:{errors:s}}=M({resolver:$(R)}),L=async D=>{i(!0);const I={...D,type:"free"};try{const m=await Y.post(`${E}/api/usersignup`,I);console.log(m);const O=m.data;if(m.status===200&&n!==null){const k=O.userId,z={name:n.name,user:k,image:o},Z=await Y.post(`${E}/api/images`,z);F.success("User and profile Image created Successfully"),h("/users")}else F.success("User created Successfully");h("/users")}catch{console.log("error")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-poppins  h-full  mx-6",children:[e.jsx("p",{className:" mx-2 text-lg  mt-6",children:"Add a new user"}),e.jsxs("form",{onSubmit:C(L),className:"mx-4 ",children:[e.jsxs("div",{className:"mx-6 grid gap-2 font-extralight my-8",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-8 items-center",children:[e.jsx(t,{label:"First Name",register:l,name:"fname",placeholder:"Enter first name",error:(y=s.fname)==null?void 0:y.message}),e.jsx(t,{label:"Last Name",register:l,name:"lname",placeholder:"Enter last Name",error:(g=s.lname)==null?void 0:g.message}),e.jsx(t,{label:"Email",register:l,name:"email",placeholder:"Enter email",error:(b=s.email)==null?void 0:b.message})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 items-center",children:[e.jsx(t,{label:"Phone",register:l,name:"phone",placeholder:"Enter phone",error:(v=s.phone)==null?void 0:v.message}),e.jsx(t,{label:"Date Of Birth",register:l,name:"dob",type:"date",error:(f=s.dob)==null?void 0:f.message}),e.jsx(c,{label:"Plan ",register:l,name:"plan",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(j=s.plan)==null?void 0:j.message})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 items-center",children:[e.jsx(t,{label:"Address Line 1",register:l,name:"addressline1",placeholder:"Enter address line 1",error:(N=s.addressline1)==null?void 0:N.message}),e.jsx(t,{label:"Address Line 2",register:l,name:"addressline2",placeholder:"Enter address line 2",error:(q=s.addressline2)==null?void 0:q.message}),e.jsx(c,{label:"City ",register:l,name:"city",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(S=s.city)==null?void 0:S.message})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 items-center",children:[e.jsx(c,{label:"State ",register:l,name:"state",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(P=s.state)==null?void 0:P.message}),e.jsx(c,{label:"Country ",register:l,name:"country",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(A=s.city)==null?void 0:A.message}),e.jsx(c,{label:"Zip Code ",register:l,name:"zipcode",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half-Yearly"},{value:"annual",label:"Annual"}],error:(w=s.zipcode)==null?void 0:w.message})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"submit",className:`my-6 cursor-pointer text-white bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-8 py-1.5 rounded-md ${a?"opacity-50 cursor-not-allowed":""}`,disabled:a,children:a?e.jsxs("div",{className:"flex text-xl gap-2",children:[e.jsx(Q,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{children:"Saving...."})]}):"Save"}),e.jsx("p",{onClick:()=>h("/users"),className:" cursor-pointer text-black bg-white  py-1.5 px-4 rounded-md ",children:"Cancel"})]})]})]})})};export{J as default};

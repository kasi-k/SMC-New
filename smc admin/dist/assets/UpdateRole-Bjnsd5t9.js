import{r as i,j as e,T as L,V as h,W as z,X as g,Y as A,Z as P,n as U,u as D,b as C,c as w,y as E}from"./index-BU4j0FDF.js";const O=({onClose:F})=>{var b,x;const[d,m]=i.useState(""),[r,j]=i.useState([{name:"Dashboard",icon:e.jsx(L,{size:20}),value:"dashboard",permissions:[{label:"Total Courses Generated",value:"totalcourse"},{label:"Total No Of Users",value:"totalusers"},{label:"Revenue Generated",value:"totalrevenue"},{label:"Course Type",value:"coursetype"},{label:"Subscriptions",value:"subscription"},{label:"Recurring Revenue",value:"recurringrevenue"},{label:"Ticket Status",value:"ticketstatus"},{label:"Monthly Activity Progress",value:"monthlyProgress"},{label:"Revenue",value:"revenue"}]},{name:"Packages",icon:e.jsx(h,{size:20}),value:"packages",permissions:[{label:"Can view Packages",value:"view"},{label:"Can add Packages",value:"add"},{label:"Can edit Packages",value:"edit"},{label:"Can delete Packages",value:"delete"}]},{name:"Courses",icon:e.jsx(z,{size:20}),value:"courses",permissions:[{label:"Can view Courses",value:"view"},{label:"Can Generate Courses",value:"create"},{label:"Can delete Courses",value:"delete"}]},{name:"Subscriptions",icon:e.jsx(h,{size:20}),value:"subscription",permissions:[{label:"Can view Subscriptions",value:"view"}]},{name:"Users",icon:e.jsx(g,{size:20}),value:"users",permissions:[{label:"Can View Users",value:"view"},{label:"Can add Users",value:"create"},{label:"Can Edit Users",value:"edit"},{label:"Can Delete Users",value:"delete"}]},{name:"Team",icon:e.jsx(g,{size:20}),value:"team",permissions:[{label:"Can View Team",value:"view"},{label:"Can add Team",value:"create"},{label:"Can Edit Team",value:"edit"},{label:"Can Delete Team",value:"delete"}]},{name:"Reports",icon:e.jsx(A,{size:20}),value:"report",permissions:[{label:"Can view Reports",value:"view"},{label:"Can Download Reports",value:"download"}]},{name:"Settings",icon:e.jsx(P,{size:20}),value:"setting",permissions:[{label:"Roles & permission",value:"roles"},{label:"Taxes",value:"tax"},{label:"Help & Support",value:"support"}]}]),[o,c]=i.useState([]),[I,f]=i.useState([]),p=U(),u=(b=p.state)==null?void 0:b.roleId,y=(x=p.state)==null?void 0:x.role,N=D();i.useEffect(()=>{u&&k()},[u]);const k=async()=>{try{const a=(await C.get(`${w}/api/getrolebyid?role_name=${u}`)).data.role;m(a.role_name),c(a.accessLevels),f(a.accessLevels)}catch(s){console.log(s)}},R=s=>{const a=[...r];a[s].checked=!a[s].checked,j(a);const l=a[s].value;a[s].checked?c(t=>{const n={feature:l,permissions:a[s].permissions.map(v=>v.value)};return[...t,n]}):c(o.filter(t=>t.feature!==l))},S=(s,a)=>{const l=[...o],t=l.findIndex(n=>n.feature===r[s].value);if(t!==-1){const n=l[t].permissions.indexOf(a);n!==-1?l[t].permissions.splice(n,1):l[t].permissions.push(a),c(l)}},T=async()=>{const s={role_name:d,accessLevels:o,status:"active"};try{(await C.put(`${w}/api/update/${y}`,s)).status===200&&(N("/setting"),window.location.reload(),E.success("Role Updated Successfully"))}catch(a){console.log(a)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#000928] mx-3 my-2 py-3",children:e.jsxs("div",{className:"mb-2 mx-6",children:[e.jsx("h3",{className:"my-2 text-base text-white",children:"Role Name:"}),e.jsx("input",{type:"text",value:d,onChange:s=>m(s.target.value),className:"py-1 mb-5 rounded-md text-center text-black w-3/4"}),r.map((s,a)=>e.jsxs("div",{className:"grid mb-3 text-base",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 w-3/6",children:[e.jsx("span",{className:"size-5 text-xl",children:s.icon}),s.name]}),e.jsx("input",{type:"checkbox",checked:o.some(l=>l.feature===s.value),onChange:()=>R(a)})]}),o.some(l=>l.feature===s.value)&&e.jsx("div",{className:"grid mx-6",children:s.permissions.map((l,t)=>{var n;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm w-4/6",children:l.label}),e.jsx("input",{type:"checkbox",value:l.value,checked:((n=o.find(v=>v.feature===s.value))==null?void 0:n.permissions.includes(l.value))||!1,onChange:()=>S(a,l.value)})]},t)})})]},a))]})}),e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("button",{className:"text-lg bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] w-1/2 py-1.5",onClick:T,children:"Save"})})]})};export{O as default};

import{r as i,u as k,a as C,b as p,c as x,j as e,p as B,A as z,o as R,y as w,d as M,e as o}from"./index-74p-botU.js";const O=M().shape({fname:o().trim().required("First name is required").transform(l=>l.toLowerCase()),lname:o().required("Last name is required").transform(l=>l.toLowerCase()),email:o().email("Please Enter a valid Email").trim().required("Email is required"),phone:o().required("Please enter mob.no"),dob:o().required("Please enter Date of birth"),designation:o().required("Please select Designation")}),_=()=>{var y,f,b,N,v,S;const[l,A]=i.useState(!1),[g,D]=i.useState(null),[E,F]=i.useState(""),[m,I]=i.useState(null),[u,h]=i.useState([]),j=k();i.useEffect(()=>{$()},[]);const{register:r,handleSubmit:P,formState:{errors:n}}=C({resolver:R(O)}),q=s=>{const a=s.target.files[0];if(!a){alert("Please select a file!");return}const t=2*1024*1024;if(a.size>t){alert("File size exceeds 2MB!");return}D(a);const c=new FileReader;c.onload=()=>{const d=c.result;F(d),I(d)},c.readAsDataURL(a)},L=async s=>{A(!0);const a={...s,password:"Admin@123",type:"free"};try{const t=await p.post(`${x}/api/adminsignup`,a),c=t.data.userId;if(t.status===200&&g!==null){const d={name:g.name,user:c,image:E},T=(await p.post(`${x}/api/images`,d)).data.image;w.success("AdminId and profile Image created Successfully"),j("/team")}else w.success("New Admin created Successfully");j("/team")}catch(t){console.log("error",t.response?t.response.data:t.message)}},$=async()=>{try{const s=await p.get(`${x}/api/getroles`);Array.isArray(s.data.role)?h(s.data.role):(console.error("Expected an array of tax options, but got:",s.data),h([]))}catch(s){console.error("Error fetching taxes:",s)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-extralight my-4",children:[e.jsx("p",{className:" mx-2 text-lg ",children:"Add a new team"}),e.jsx("hr",{}),e.jsxs("div",{className:"mx-12 my-6 space-y-1",children:[e.jsx("img",{src:m||B,alt:"Profile",className:`w-40 h-40 ${m?" rounded-3xl object-cover":""}`}),e.jsxs("div",{className:"relative text-base  bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] lg:w-40 h-12   my-5  ",children:[e.jsx("p",{className:" absolute text-lg  py-2.5 text-center right-4",children:"Upload Image"}),e.jsx("input",{accept:".jpg,.jpeg,.png,.gif",type:"file",onChange:q,className:"opacity-0 w-full h-full"})]})]}),e.jsxs("form",{onSubmit:P(L),children:[e.jsxs("div",{className:"grid lg:grid-cols-12 md:grid-cols-10 mx-6 gap-6 ",children:[e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{...r("fname"),type:"text",placeholder:"Enter First name",className:"outline-none text-black rounded-md py-1.5 px-3 my-3 "}),e.jsx("p",{className:"text-red-700",children:(y=n.fname)==null?void 0:y.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{...r("lname"),type:"text",placeholder:"Enter Last name",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(f=n.lname)==null?void 0:f.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{...r("email"),type:"email",placeholder:"Enter Email",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(b=n.email)==null?void 0:b.message})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 md:grid-cols-10 mx-6 gap-6 my-5",children:[e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Phone"}),e.jsx("input",{...r("phone"),type:"text",className:"outline-none text-black rounded-md py-1.5 px-3 my-3",placeholder:"Enter Mobile Number"}),e.jsx("p",{className:"text-red-700",children:(N=n.phone)==null?void 0:N.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsx("label",{children:"Date Of Birth"}),e.jsx("input",{...r("dob"),type:"date",className:"outline-none text-black rounded-md py-1.5 px-3 my-3"}),e.jsx("p",{className:"text-red-700",children:(v=n.dob)==null?void 0:v.message})]}),e.jsxs("div",{className:"grid col-span-3",children:[e.jsxs("label",{children:["Designation",e.jsx("span",{className:"text-red-600 ",children:"*"})]}),e.jsxs("select",{...r("designation"),defaultValue:"select",className:"outline-none text-black rounded-md py-1.5 px-3 my-3",children:[e.jsx("option",{value:"select",disabled:!0,children:"Select Designation"}),u&&u.map((s,a)=>e.jsx("option",{value:s.designation,children:s.role_name},a))]}),e.jsx("p",{className:"text-red-700",children:(S=n.designation)==null?void 0:S.message})]})]}),e.jsx("button",{type:"submit",className:`lg:absolute text-lg bottom-10 mx-6   bg-gradient-to-r from-[#3D03FA] to-[#A71CD2] px-16 py-2 ${l?"opacity-50 cursor-not-allowed":""}`,disabled:l,children:l?e.jsxs("div",{className:"flex  text-xl gap-2",children:[e.jsx(z,{className:"h-6 w-6 animate-spin"}),e.jsx("p",{children:"Saving...."})]}):"Save"})]})," "]})})};export{_ as default};
